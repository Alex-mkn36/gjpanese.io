<!DOCTYPE html>
<html>
<head>
    <title>Loading...</title>
    <script>
        const type = "{{ type }}";

        if (type === "generate") {
            fetch("/generate-sentence")
                .then(response => response.json())
                .then(data => {
                    if (data.status === "done") {
                        window.location.href = "/result";
                    }
                });
        } else if (type === "check") {
            fetch("/check-sentence")
                .then(response => response.json())
                .then(data => {
                    if (data.status === "done") {
                        window.location.href = "/result";
                    }
                });
        }
    </script>
    <style>
        body {
            background-image: url('{{ background }}');
            background-size: contain;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center center;
            background-color: black;
        }

        .kanji-spinner {
            font-size: 120px;
            font-family: 'Noto Sans JP', sans-serif;
            color: #8bff9e;
            animation: fade 2s ease-in-out infinite;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        @keyframes fade {
        0% { opacity: 1; }
        50% { opacity: 0.3; }
        100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="kanji-spinner" id="kanji-spinner">日</div>
    <script>
    const characters = ['本日', '歌', '部屋', '来年', '遅い', '青春', '見舞', '無難', '放射能', '問う'];
    let index = 0;

    setInterval(() => {
    document.getElementById('kanji-spinner').textContent = characters[index];
    index = (index + 1) % characters.length;
    }, 500);
    </script>
</body>
</html>
